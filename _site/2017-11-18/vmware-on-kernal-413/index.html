<!DOCTYPE html>
<html>

<head>
    <title>VMware Workstation Pro 14がLinux Kernel4.13で動くようにする</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="keywords" content="VMware Workstation Pro 14がLinux Kernel4.13で動くようにする, Linux, Linux_Tips, LinuxClub BLOG" />
    <meta name="description" content="VMware Workstation Pro 14がLinux Kernel4.13で動くようにする, Linux, Linux_Tips, Author: panakumaLinux Kernal 4.13がやっと動いたが…私のマシンでは長らくLinux kernel 4.4系しか動かなかったのですが、Oracle VirtualBoxの関連コンポーネントを根こそぎ削除したところ4.13系が動作しました。ですが…" />
    <meta name="theme-color" content="#2CA6CB"/>
    <link rel="shortcut icon" type="image/x-icon" media="screen" href="http://0.0.0.0:4000/static/img/favicon.ico" />
    <link rel="canonical" href="http://0.0.0.0:4000/2017-11-18/vmware-on-kernal-413/" />
    <link rel="alternate" type="application/rss+xml" title="LinuxClub BLOG" href="http://0.0.0.0:4000/feed.xml"  />

    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.bootcss.com/octicons/3.5.0/octicons.min.css" >
    <link rel="stylesheet" type="text/css" href="http://0.0.0.0:4000/static/css/style.css" />
    <link rel="stylesheet" type="text/css" href="http://0.0.0.0:4000/static/css/highlight.css" />
    <link rel="stylesheet" type="text/css" href="http://0.0.0.0:4000/static/css/post.css" />
    

</head>


<body>

    <header>
        <nav class="navbar navbar-tiffany rectangle" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://0.0.0.0:4000/">LinuxClub BLOG</a>
                    <p class="navbar-text">東京工科大公認サークル LinuxClub のブログです.</p>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        
                        <li>
                        <a href="http://0.0.0.0:4000/" class="word-keep"><span class="octicon octicon-book"></span></span>&nbsp;&nbsp;Blog</a>
                        </li>
                        
                        
                        <li>
                            <a href="http://0.0.0.0:4000/archive/" class="word-keep"><span class="octicon octicon-repo"></span>&nbsp;&nbsp;Archive</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="http://0.0.0.0:4000/category/" class="word-keep"><span class="octicon octicon-list-unordered"></span>&nbsp;&nbsp;Category</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="http://0.0.0.0:4000/tags/" class="word-keep"><span class="octicon octicon-tag"></span>&nbsp;&nbsp;Tag</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <!-- li><a href="#stq=" class="search-button"><span class="octicon octicon-search"></span></a></li -->
                    </ul>
                </div>
            </div>
        </nav>
    </header>



<div class="main">
    <div class="container">
        <div class="row">
    <div class="content col-lg-9">
        <div class="sheet post">
          <header>
            <h2>VMware Workstation Pro 14がLinux Kernel4.13で動くようにする</h2>
            <p class="post-meta">
                <span class="octicon octicon-clock"></span> Nov 18, 2017
            </p>
            <p class="post-tag">
                <span><a href="http://0.0.0.0:4000/category/#Linux"><span class="octicon octicon-list-unordered"></span>&nbsp;Linux</a></span>
                <span>
                    <a class="word-keep" href="http://0.0.0.0:4000/tags/#Linux_Tips"><span class="octicon octicon-tag"></span>&nbsp;Linux_Tips</a>
                    
                </span>
            </p>
          </header>
          <hr class="boundary">
          <article>
            <p>Author: <a href="https://github.com/kumapana/">panakuma</a></p>
<h2 id="linux-kernal-413がやっと動いたが">Linux Kernal 4.13がやっと動いたが…</h2>
<p>私のマシンでは長らくLinux kernel 4.4系しか動かなかったのですが、Oracle VirtualBoxの関連コンポーネントを根こそぎ削除したところ4.13系が動作しました。ですが…</p>

<p><strong>VMware Workstation Pro 14上の仮想マシンが起動しなくなりました</strong></p>

<p>具体的には次のようなエラーメッセージが表示されます。</p>

<p><img src="/images/vmware/img01.png" alt="unable to reserve memory" /></p>

<p><img src="/images/vmware/img02.png" alt="could not lock memory" /></p>

<p><img src="/images/vmware/img03.png" alt="failed to switch to 64bit mode" /></p>

<p>VMware Workstation がkernel4.13に対応していないことが原因のようです。Kernelに対する命令である<code class="highlighter-rouge">global_page_state</code>が4.13以降で<code class="highlighter-rouge">global_zone_page_state</code>に変わったことが原因です。有志の方がこれに対応するパッチを作成していたので、これを用いて対処していきます。</p>

<p>次のコマンドでパッチを当てることができます。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    sudo -i
    cd /tmp
    cp /usr/lib/vmware/modules/source/vmmon.tar .
    tar xf vmmon.tar
    rm vmmon.tar
    wget https://raw.githubusercontent.com/mkubecek/vmware-host-modules/fadedd9c8a4dd23f74da2b448572df95666dfe12/vmmon-only/linux/hostif.c
    mv -f hostif.c vmmon-only/linux/hostif.c 
    tar cf vmmon.tar vmmon-only
    rm -fr vmmon-only
    mv -f vmmon.tar /usr/lib/vmware/modules/source/vmmon.tar 
    vmware-modconfig --console --install-all
</code></pre></div></div>

<p>コマンド実行後に再起動を行うことで、VMware Workstationが正常に動作します。</p>

<hr />
<p>参考文献</p>

<p><a href="https://bbs.archlinux.org/viewtopic.php?id=230487">Arch Linux User Forums VMWare Workstation 14.0 - not enough physical memory</a></p>

          </article>
          <hr class="boundary">
          <div id="post-share" class="bdsharebuttonbox">
              <!-- a href="#" class="bds_more" data-cmd="more"></a>
              <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
              <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
              <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
              <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
              <a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a -->
              <a href="https://twitter.com/share" class="twitter-share-button" data-via="lc_tut" data-size="large">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
              <a href="http://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="basic-label" data-hatena-bookmark-lang="ja" data-hatena-bookmark-height="28" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
              <div style="display: inline-block; transform: scale(1.5);padding-left: 10px;">
                <a data-pocket-label="pocket" data-pocket-count="none" class="pocket-btn" data-lang="en"></a>
                <script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>
              </div>
          </div>
          <!-- div class="pad-min"></div>
          <div id="post-comment" class="sheet post">
              <div id="disqus_thread"></div>
          </div -->
        </div>
    </div>
    <div class="content-navigation col-lg-3">
      <div class="shadow-bottom-center" >
        <div class="content-navigation-toc">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Toc
            </div>
            <div class="content-navigation-list toc"></div>
        </div>
        <div class="content-navigation-tag">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Tags
            </div>
            <div class="content-navigation-list">
                <ul>
                    
                    <li>
                        <a href="http://0.0.0.0:4000/tags#Linux_Tips"><span class="octicon octicon-tag"></span>&nbsp;Linux_Tips</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="content-navigation-related">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Related
            </div>
            <div class="content-navigation-list">
                <ul>
                    

                    

                    
                </ul>
            </div>
        </div>
      </div>
    </div>
</div>

    </div>
    <div class="page-scrollTop" data-toggle="tooltip" data-placement="top" title="Top">
        <a href="javascript:void(0);">
            <div class="arrow"></div>
            <div class="stick"></div>
        </a>
    </div>
</div>

    <footer  class="footnote footnote-tiffany">
        <div class="container">
                <a class="foot-item" href="mailto:linuxclub.tut@gmail.com" target="_blank"><span class="octicon octicon-mail"></span></a>
                <a class="foot-item" href="https://github.com/lc-tut" target="_blank"><span class="octicon octicon-mark-github"></span></a>
                <a class="foot-item" href="http://0.0.0.0:4000/feed.xml" target="_blank"><span class="octicon octicon-rss"></span></a>
                <a class="foot-item" href="http://0.0.0.0:4000/link/"><span class="octicon octicon-link-external"></span></a>
                &nbsp;
                <a href="http://blog.rainyalley.com/"><span class="word-keep">&copy; RainyAlley</span></a>
        </div>
    </footer>
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://0.0.0.0:4000/static/js/script.js"></script>
    <script type="text/javascript" src="http://0.0.0.0:4000/static/js/post.js"></script>
    


</body>
</html>
